<!DOCTYPE html>
<html lang="de" class="book-page" data-theme="default" data-para="margin" data-width="normal">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Popclient becomes Fetchmail</title>
  <link rel="stylesheet" href="../../../assets/book.css" />
</head>
<body class="book-body">
<main class="book-main">
  <button id="themeToggle" class="reader-toggle reader-toggle-theme" aria-label="Theme umschalten" title="Theme umschalten">ğŸŒ™</button>
  <button id="sizeToggle" class="reader-toggle reader-toggle-size" aria-label="SchriftgrÃ¶ÃŸe umschalten" title="SchriftgrÃ¶ÃŸe umschalten">A</button>
  <article class="book-chapter" data-chapter="7" id="c-7">
    <h1 class="book-chapter-title" id="c-7-title" data-slug="popclient-becomes-fetchmail">Popclient becomes Fetchmail</h1>
    <section class="book-paragraph" id="p-7-1">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-1">1|</a>
        <span class="book-sentence" id="s-7-1-1-p0">The real turning point in the proÂ­ject was when Harry HochÂ­heiÂ­ser sent me his scratch code for forÂ­warÂ­ding mail to the cliÂ­ent maÂ­chiÂ­ne's SMTP port.</span>
        
        <span class="book-sentence" id="s-7-1-2-p0">I reaÂ­liÂ­zed alÂ­most imÂ­meÂ­diaÂ­teÂ­ly that a reÂ­liaÂ­ble imÂ­pleÂ­menÂ­taÂ­tiÂ­on of this feaÂ­ture would make all the other mail deÂ­liÂ­very modes next to obÂ­soÂ­leÂ­te.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-2">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-2">2|</a>
        <span class="book-sentence" id="s-7-2-1-p0">For many weeks I had been tweaÂ­king fetchmail raÂ­ther inÂ­creÂ­menÂ­talÂ­ly while feeÂ­ling like the inÂ­terÂ­face deÂ­sign was serÂ­viceÂ­able but grubÂ­byâ€”inÂ­eleÂ­gant and with too many exiÂ­guous opÂ­tiÂ­ons hanÂ­ging out all over.</span>
        
        <span class="book-sentence" id="s-7-2-2-p0">The opÂ­tiÂ­ons to dump fetÂ­ched mail to a mailÂ­box file or stanÂ­dard outÂ­put parÂ­tiÂ­cuÂ­larÂ­ly boÂ­theÂ­red me, but I couldn't fiÂ­guÂ­re out why.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-3">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-3">3|</a>
        <span class="book-sentence" id="s-7-3-1-p0">(If you don't care about the techÂ­niÂ­caÂ­lia of InÂ­terÂ­net mail, the next two paÂ­raÂ­graphs can be safeÂ­ly skipÂ­ped.)</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-4">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-4">4|</a>
        <span class="book-sentence" id="s-7-4-1-p0">What I saw when I thought about SMTP forÂ­warÂ­ding was that popÂ­cliÂ­ent had been tryÂ­ing to do too many things.</span>
        
        <span class="book-sentence" id="s-7-4-2-p0">It had been deÂ­siÂ­gned to be both a mail transÂ­port agent (MTA) and a local deÂ­liÂ­very agent (MDA).</span>
        
        <span class="book-sentence" id="s-7-4-3-p0">With SMTP forÂ­warÂ­ding, it could get out of the MDA busiÂ­ness and be a pure MTA, hanÂ­ding off mail to other proÂ­grams for local deÂ­liÂ­very just as sendÂ­mail does.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-5">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-5">5|</a>
        <span class="book-sentence" id="s-7-5-1-p0">Why mess with all the comÂ­pleÂ­xiÂ­ty of conÂ­fiÂ­guÂ­ring a mail deÂ­liÂ­very agent or setÂ­ting up lock-and-apÂ­pend on a mailÂ­box when port 25 is alÂ­most guaÂ­ranÂ­teÂ­ed to be there on any platÂ­form with TCP/IP supÂ­port in the first place?</span>
        
        <span class="book-sentence" id="s-7-5-2-p0">EsÂ­peÂ­cialÂ­ly when this means reÂ­trieÂ­ved mail is guaÂ­ranÂ­teÂ­ed to look like norÂ­mal senÂ­der-inÂ­itiaÂ­ted SMTP mail, which is reÂ­alÂ­ly what we want anyÂ­way.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-6">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-6">6|</a>
        <span class="book-sentence" id="s-7-6-1-p0">(Back to a higÂ­her level....)</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-7">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-7">7|</a>
        <span class="book-sentence" id="s-7-7-1-p0">Even if you didn't folÂ­low the preÂ­ceÂ­ding techÂ­niÂ­cal jarÂ­gon, there are seÂ­veral imÂ­portant lesÂ­sons here.</span>
        
        <span class="book-sentence" id="s-7-7-2-p0">First, this SMTP-forÂ­warÂ­ding conÂ­cept was the bigÂ­gest sinÂ­gle payÂ­off I got from conÂ­sciousÂ­ly tryÂ­ing to emuÂ­laÂ­te Linus's meÂ­thods.</span>
        
        <span class="book-sentence" id="s-7-7-3-p0">A user gave me this terÂ­riÂ­fic ideaâ€”all I had to do was unÂ­derÂ­stand the imÂ­pliÂ­caÂ­tiÂ­ons.</span>
        
      </p>
    </section>
    <h2 class="book-subheading" id="h2-7-1" data-slug="11-the-next-best-thing-to-having-good-ideas-is-recognizing-good-ideas-from-your-users-sometimes-the-latter-is-better">11. The next best thing to having good ideas is recognizing good ideas from your users. Sometimes the latter is better.</h2>
    <section class="book-paragraph" id="p-7-8">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-8">8|</a>
        <span class="book-sentence" id="s-7-8-1-p0">InÂ­teÂ­resÂ­tingÂ­ly enÂ­ough, you will quickÂ­ly find that if you are comÂ­pleÂ­teÂ­ly and self-depreÂ­caÂ­tingÂ­ly trutÂ­hÂ­ful about how much you owe other peopÂ­le, the world at large will treat you as though you did every bit of the inÂ­venÂ­tiÂ­on yoursÂ­elf and are just being beÂ­coÂ­mÂ­ingly moÂ­dest about your inÂ­naÂ­te geÂ­niÂ­us.</span>
        
        <span class="book-sentence" id="s-7-8-2-p0">We can all see how well this worked for Linus!</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-9">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-9">9|</a>
        <span class="book-sentence" id="s-7-9-1-p0">(When I gave my talk at the first Perl ConÂ­feÂ­rence in AuÂ­gust 1997, haÂ­cker exÂ­traÂ­orÂ­diÂ­naiÂ­re Larry Wall was in the front row.</span>
        
        <span class="book-sentence" id="s-7-9-2-p0">Ass I got to the last line above he calÂ­led out, reÂ­liÂ­gious-reÂ­viÂ­val style,</span>
        
        <span class="book-sentence" id="s-7-9-2-p1-q"><q author="Larry Wall" part="1">Tell it, tell it, broÂ­ther!</q></span>
        
        <span class="book-sentence" id="s-7-9-2-p2">. The whole auÂ­diÂ­ence laugÂ­hed, beÂ­cauÂ­se they knew this had worked for the inÂ­venÂ­tor of Perl, too.)</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-10">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-10">10|</a>
        <span class="book-sentence" id="s-7-10-1-p0">After a very few weeks of runÂ­ning the proÂ­ject in the same spiÂ­rit, I began to get siÂ­miÂ­lar praiÂ­se not just from my users but from other peopÂ­le to whom the word leaÂ­kÂ­ed out.</span>
        
        <span class="book-sentence" id="s-7-10-2-p0">I stasÂ­hed away some of that email; I'll look at it again soÂ­meÂ­time if I ever start wonÂ­deÂ­ring wheÂ­ther my life has been worthwÂ­hiÂ­le:-).</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-11">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-11">11|</a>
        <span class="book-sentence" id="s-7-11-1-p0">But there are two more funÂ­daÂ­menÂ­tal, non-poÂ­liÂ­tiÂ­cal lesÂ­sons here that are geÂ­neÂ­ral to all kinds of deÂ­sign.</span>
        
      </p>
    </section>
    <h2 class="book-subheading" id="h2-7-2" data-slug="12-often-the-most-striking-and-innovative-solutions-come-from-realizing-that-your-concept-of-the-problem-was-wrong">12. Often, the most striking and innovative solutions come from realizing that your concept of the problem was wrong.</h2>
    <section class="book-paragraph" id="p-7-12">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-12">12|</a>
        <span class="book-sentence" id="s-7-12-1-p0">I had been tryÂ­ing to solve the wrong proÂ­blem by conÂ­tiÂ­nuing to deÂ­veÂ­lop popÂ­cliÂ­ent as a comÂ­biÂ­ned MTA/MDA with all kinds of funky local deÂ­liÂ­very modes.</span>
        
        <span class="book-sentence" id="s-7-12-2-p0">Fetchmail's deÂ­sign neeÂ­ded to be reÂ­thought from the ground up as a pure MTA, a part of the norÂ­mal SMTP-speaÂ­king InÂ­terÂ­net mail path.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-13">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-13">13|</a>
        <span class="book-sentence" id="s-7-13-1-p0">When you hit a wall in deÂ­veÂ­lopÂ­mentâ€”when you find yoursÂ­elf hard put to think past the next patchâ€”it's often time to ask not wheÂ­ther you've got the right anÂ­sÂ­wer, but wheÂ­ther you're asÂ­king the right quesÂ­tiÂ­on.</span>
        
        <span class="book-sentence" id="s-7-13-2-p0">PerÂ­haps the proÂ­blem needs to be reÂ­framed.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-14">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-14">14|</a>
        <span class="book-sentence" id="s-7-14-1-p0">Well, I had reÂ­framed my proÂ­blem.</span>
        
        <span class="book-sentence" id="s-7-14-2-p0">CleÂ­arÂ­ly, the right thing to do was (1) hack SMTP forÂ­warÂ­ding supÂ­port into the geÂ­neÂ­ric driÂ­ver, (2) make it the deÂ­fault mode, and (3) evenÂ­tualÂ­ly throw out all the other deÂ­liÂ­very modes, esÂ­peÂ­cialÂ­ly the deÂ­liÂ­ver-to-file and deÂ­liÂ­ver-to-stanÂ­dard-outÂ­put opÂ­tiÂ­ons.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-15">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-15">15|</a>
        <span class="book-sentence" id="s-7-15-1-p0">I heÂ­siÂ­taÂ­ted over step 3 for some time, feaÂ­ring to upset long-time popÂ­cliÂ­ent users deÂ­penÂ­dent on the alÂ­terÂ­naÂ­te deÂ­liÂ­very meÂ­chaÂ­nisms.</span>
        
        <span class="book-sentence" id="s-7-15-2-p0">In theoÂ­ry, they could imÂ­meÂ­diaÂ­teÂ­ly switch to.forÂ­ward files or their non-sendÂ­mail equiÂ­vaÂ­lÂ­ents to get the same efÂ­fects.</span>
        
        <span class="book-sentence" id="s-7-15-3-p0">In pracÂ­tice the tranÂ­siÂ­tiÂ­on might have been messy.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-16">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-16">16|</a>
        <span class="book-sentence" id="s-7-16-1-p0">But when I did it, the beÂ­neÂ­fits proÂ­ved huge.</span>
        
        <span class="book-sentence" id="s-7-16-2-p0">The crufÂ­tiest parts of the driÂ­ver code vaÂ­nisÂ­hed.</span>
        
        <span class="book-sentence" id="s-7-16-3-p0">ConÂ­fiÂ­guÂ­raÂ­tiÂ­on got raÂ­diÂ­calÂ­ly simÂ­plerâ€”no more groÂ­velÂ­ling around for the sysÂ­tem MDA and user's mailÂ­box, no more worries about wheÂ­ther the unÂ­derÂ­lyÂ­ing OS supÂ­ports file loÂ­cking.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-17">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-17">17|</a>
        <span class="book-sentence" id="s-7-17-1-p0">Also, the only way to lose mail vaÂ­nisÂ­hed.</span>
        
        <span class="book-sentence" id="s-7-17-2-p0">If you speÂ­ciÂ­fied deÂ­liÂ­very to a file and the disk got full, your mail got lost.</span>
        
        <span class="book-sentence" id="s-7-17-3-p0">This can't hapÂ­pen with SMTP forÂ­warÂ­ding beÂ­cauÂ­se your SMTP lisÂ­tener won't reÂ­turn OK unÂ­less the mesÂ­saÂ­ge can be deÂ­liÂ­veÂ­rÂ­ed or at least spooÂ­led for later deÂ­liÂ­very.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-18">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-18">18|</a>
        <span class="book-sentence" id="s-7-18-1-p0">Also, perÂ­forÂ­mance imÂ­proÂ­ved (though not so you'd noÂ­tiÂ­ce it in a sinÂ­gle run).</span>
        
        <span class="book-sentence" id="s-7-18-2-p0">AnoÂ­ther not inÂ­siÂ­gniÂ­fiÂ­cant beÂ­neÂ­fit of this chanÂ­ge was that the maÂ­nuÂ­al page got a lot simÂ­pler.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-19">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-19">19|</a>
        <span class="book-sentence" id="s-7-19-1-p0">Later, I had to bring deÂ­liÂ­very via a user-speÂ­ciÂ­fied local MDA back in order to allow handÂ­ling of some obÂ­scuÂ­re siÂ­tuaÂ­tiÂ­ons inÂ­volÂ­ving dyÂ­naÂ­mic SLIP.</span>
        
        <span class="book-sentence" id="s-7-19-2-p0">But I found a much simÂ­pler way to do it.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-20">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-20">20|</a>
        <span class="book-sentence" id="s-7-20-1-p0">The moral?</span>
        
        <span class="book-sentence" id="s-7-20-2-p0">Don't heÂ­siÂ­taÂ­te to throw away suÂ­peranÂ­nuaÂ­ted feaÂ­tures when you can do it wiÂ­thout loss of efÂ­fecÂ­tivenÂ­ess.</span>
        
        <span class="book-sentence" id="s-7-20-3-p0">AnÂ­toiÂ­ne de Saint-ExupÃ©ry (who was an aviaÂ­tor and airÂ­craft deÂ­siÂ­gner when he wasn't autÂ­hoÂ­ring clasÂ­sic childÂ­ren's books) said:</span>
        
      </p>
    </section>
    <h2 class="book-subheading" id="h2-7-3" data-slug="13-q-author-antoine-de-saint-exupery-book-title-wind-sand-and-stars-part-1-perfection-in-design-is-achieved-not-when-there-is-nothing-more-to-add-but-rather-when-there-is-nothing-more-to-take-away-q">13. &lt;q author="Antoine de Saint-ExupÃ©ry" book-title="Wind, Sand and Stars" part="1"&gt;Perfection (in design) is achieved not when there is nothing more to add, but rather when there is nothing more to take away.&lt;/q&gt;</h2>
    <section class="book-paragraph" id="p-7-21">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-21">21|</a>
        <span class="book-sentence" id="s-7-21-1-p0">When your code is getÂ­ting both betÂ­ter and simÂ­pler, that is when you know it's right.</span>
        
        <span class="book-sentence" id="s-7-21-2-p0">And in the proÂ­cess, the fetchmail deÂ­sign acÂ­quiÂ­red an idenÂ­tiÂ­ty of its own, difÂ­feÂ­rent from the anÂ­cesÂ­tral popÂ­cliÂ­ent.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-22">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-22">22|</a>
        <span class="book-sentence" id="s-7-22-1-p0">It was time for the name chanÂ­ge.</span>
        
        <span class="book-sentence" id="s-7-22-2-p0">The new deÂ­sign looÂ­ked much more like a dual of sendÂ­mail than the old popÂ­cliÂ­ent had; both are MTAs, but where sendÂ­mail pusÂ­hes then deÂ­liÂ­vers, the new popÂ­cliÂ­ent pulls then deÂ­liÂ­vers.</span>
        
        <span class="book-sentence" id="s-7-22-3-p0">So, two months off the blocks, I reÂ­naÂ­med it fetchmail.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-23">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-23">23|</a>
        <span class="book-sentence" id="s-7-23-1-p0">There is a more geÂ­neÂ­ral lesÂ­son in this story about how SMTP deÂ­liÂ­very came to fetchmail.</span>
        
        <span class="book-sentence" id="s-7-23-2-p0">It is not only deÂ­bugÂ­ging that is parÂ­alÂ­leÂ­lizÂ­able; deÂ­veÂ­lopÂ­ment and (to a perÂ­haps surÂ­priÂ­sing extent) exÂ­ploÂ­raÂ­tiÂ­on of deÂ­sign space is, too.</span>
        
        <span class="book-sentence" id="s-7-23-3-p0">When your deÂ­veÂ­lopÂ­ment mode is raÂ­pidly iteÂ­raÂ­tiÂ­ve, deÂ­veÂ­lopÂ­ment and enÂ­hanÂ­ceÂ­ment may beÂ­coÂ­me speÂ­cial cases of deÂ­bugÂ­gingâ€”fiÂ­xing `bugs of omisÂ­siÂ­on' in the oriÂ­giÂ­nal caÂ­paÂ­biÂ­liÂ­ties or conÂ­cept of the softÂ­ware.</span>
        
      </p>
    </section>
    <section class="book-paragraph" id="p-7-24">
      <p class="book-paragraph-text">
        <a class="p-num" href="#p-7-24">24|</a>
        <span class="book-sentence" id="s-7-24-1-p0">Even at a higÂ­her level of deÂ­sign, it can be very vaÂ­luable to have lots of co-deÂ­veÂ­lÂ­oÂ­pers ranÂ­dom-walÂ­king through the deÂ­sign space near your proÂ­duct.</span>
        
        <span class="book-sentence" id="s-7-24-2-p0">ConÂ­sider the way a puddÂ­le of water finds a drain, or betÂ­ter yet how ants find food: exÂ­ploÂ­raÂ­tiÂ­on esÂ­senÂ­tiÂ­alÂ­ly by difÂ­fuÂ­siÂ­on, folÂ­loÂ­wed by exÂ­ploiÂ­taÂ­tiÂ­on meÂ­diaÂ­ted by a scalable comÂ­muÂ­niÂ­caÂ­tiÂ­on meÂ­chaÂ­nism.</span>
        
        <span class="book-sentence" id="s-7-24-3-p0">This works very well; as with Harry HochÂ­heiÂ­ser and me, one of your ouÂ­triÂ­ders may well find a huge win neÂ­arÂ­by that you were just a littÂ­le too close-foÂ­cuÂ­sed to see.</span>
        
      </p>
    </section>
  </article>
  <nav class="chapter-nav book-chapter-nav">
    <a class="nav-btn prev" href="06-when-is-a-rose-not-a-rose.html" aria-label="ZurÃ¼ck zum vorherigen Kapitel">ZurÃ¼ck</a>
    <a class="nav-btn next" href="08-fetchmail-grows-up.html" aria-label="Weiter zum nÃ¤chsten Kapitel">NÃ¤chstes Kapitel</a>
  </nav>
</main>
  <script src="../../../assets/reader.js" defer></script>
</body>
</html>